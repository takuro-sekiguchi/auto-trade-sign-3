<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#10b981">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>AI Trade - è‡ªå‹•å£²è²·è¨­å®š</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        body {
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior: none;
        }

        .smooth-transition {
            transition: all 0.3s ease;
        }

        .toggle-switch {
            position: relative;
            width: 48px;
            height: 28px;
            background: #374151;
            border-radius: 14px;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: #10b981;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .toggle-switch.active::after {
            transform: translateX(20px);
        }

        .step-line {
            width: 2px;
            height: 24px;
            background: #374151;
            margin-left: 15px;
        }

        .step-line.completed {
            background: #10b981;
        }
    </style>
</head>

<body class="bg-gray-900 text-white min-h-screen">

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div x-data="setupApp()">

        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="bg-gray-900 px-4 pt-4 pb-3 sticky top-0 z-10 border-b border-gray-800">
            <div class="flex items-center justify-between">
                <a href="index.html" class="flex items-center space-x-2 text-gray-400 hover:text-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                        </path>
                    </svg>
                    <span class="text-sm">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</span>
                </a>
                <h1 class="font-bold">è‡ªå‹•å£²è²·è¨­å®š</h1>
                <div class="w-16"></div>
            </div>
        </header>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ -->
        <main class="px-4 py-6">

            <!-- ã‚¤ãƒ³ãƒˆãƒ­ -->
            <div class="text-center mb-8">
                <div class="text-4xl mb-3">ğŸ¤–</div>
                <h2 class="text-xl font-bold mb-2">è‡ªå‹•å£²è²·ã‚’è¨­å®šã™ã‚‹</h2>
                <p class="text-sm text-gray-400">AIãŒã‚µã‚¤ãƒ³ã«åŸºã¥ã„ã¦è‡ªå‹•ã§å–å¼•ã‚’è¡Œã„ã¾ã™</p>
            </div>

            <!-- è¨­å®šãƒ•ã‚©ãƒ¼ãƒ  -->
            <div class="space-y-6">

                <!-- STEP 1: APIé€£æº -->
                <div class="bg-gray-800/50 rounded-xl p-4">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold"
                            :class="apiConnected ? 'bg-green-500 text-white' : 'bg-gray-600 text-gray-300'">
                            <span x-show="!apiConnected">1</span>
                            <svg x-show="apiConnected" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="font-medium">å–å¼•æ‰€ã¨APIé€£æº</h3>
                            <p class="text-xs text-gray-400">ãŠä½¿ã„ã®å–å¼•æ‰€ã¨æ¥ç¶šã—ã¾ã™</p>
                        </div>
                    </div>

                    <div x-show="!apiConnected" class="space-y-3">
                        <p class="text-sm text-gray-300 mb-3">
                            è‡ªå‹•å£²è²·ã‚’è¡Œã†ã«ã¯ã€å–å¼•æ‰€ã®APIã‚­ãƒ¼ãŒå¿…è¦ã§ã™ã€‚<br>
                            ã‚ãªãŸã®è³‡ç”£ã¯å–å¼•æ‰€ã§ç®¡ç†ã•ã‚Œã€AIãŒå£²è²·æŒ‡ç¤ºã‚’é€ä¿¡ã—ã¾ã™ã€‚
                        </p>
                        <div class="space-y-2">
                            <button @click="selectExchange('bitflyer')"
                                class="w-full flex items-center space-x-3 p-3 rounded-lg smooth-transition"
                                :class="selectedExchange === 'bitflyer' ? 'bg-green-500/20 border border-green-500' : 'bg-gray-700 hover:bg-gray-600'">
                                <span class="text-2xl">ğŸŸ </span>
                                <span class="font-medium">bitFlyer</span>
                            </button>
                            <button @click="selectExchange('coincheck')"
                                class="w-full flex items-center space-x-3 p-3 rounded-lg smooth-transition"
                                :class="selectedExchange === 'coincheck' ? 'bg-green-500/20 border border-green-500' : 'bg-gray-700 hover:bg-gray-600'">
                                <span class="text-2xl">ğŸŸ¢</span>
                                <span class="font-medium">Coincheck</span>
                            </button>
                            <button @click="selectExchange('gmo')"
                                class="w-full flex items-center space-x-3 p-3 rounded-lg smooth-transition"
                                :class="selectedExchange === 'gmo' ? 'bg-green-500/20 border border-green-500' : 'bg-gray-700 hover:bg-gray-600'">
                                <span class="text-2xl">ğŸ”µ</span>
                                <span class="font-medium">GMOã‚³ã‚¤ãƒ³</span>
                            </button>
                        </div>
                        <div x-show="selectedExchange" x-transition class="mt-4 space-y-3">
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">APIã‚­ãƒ¼</label>
                                <input type="text" x-model="apiKey" placeholder="APIã‚­ãƒ¼ã‚’å…¥åŠ›"
                                    class="w-full bg-gray-700 rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-green-500">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">APIã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ</label>
                                <input type="password" x-model="apiSecret" placeholder="APIã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’å…¥åŠ›"
                                    class="w-full bg-gray-700 rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-green-500">
                            </div>
                            <button @click="connectApi()"
                                class="w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-6 rounded-lg smooth-transition"
                                :disabled="!apiKey || !apiSecret">
                                æ¥ç¶šã‚’ç¢ºèªã™ã‚‹
                            </button>
                            <p class="text-xs text-gray-500 text-center">
                                <a href="#" class="text-blue-400 underline">APIã‚­ãƒ¼ã®å–å¾—æ–¹æ³•ã‚’è¦‹ã‚‹</a>
                            </p>
                        </div>
                    </div>

                    <div x-show="apiConnected" class="flex items-center justify-between p-3 bg-green-500/10 rounded-lg">
                        <div class="flex items-center space-x-2">
                            <span class="text-green-400">âœ“</span>
                            <span class="text-sm" x-text="selectedExchange + ' ã¨æ¥ç¶šæ¸ˆã¿'"></span>
                        </div>
                        <button @click="disconnectApi()" class="text-xs text-gray-400 hover:text-red-400">è§£é™¤</button>
                    </div>
                </div>

                <div class="step-line" :class="apiConnected ? 'completed' : ''"></div>

                <!-- STEP 2: å¯¾è±¡éŠ˜æŸ„é¸æŠ -->
                <div class="bg-gray-800/50 rounded-xl p-4"
                    :class="!apiConnected ? 'opacity-50 pointer-events-none' : ''">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold"
                            :class="selectedAssets.length > 0 && apiConnected ? 'bg-green-500 text-white' : 'bg-gray-600 text-gray-300'">
                            <span x-show="!(selectedAssets.length > 0 && apiConnected)">2</span>
                            <svg x-show="selectedAssets.length > 0 && apiConnected" class="w-5 h-5" fill="currentColor"
                                viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="font-medium">å¯¾è±¡éŠ˜æŸ„ã‚’é¸æŠ</h3>
                            <p class="text-xs text-gray-400">è‡ªå‹•å£²è²·ã™ã‚‹éŠ˜æŸ„ã‚’é¸ã‚“ã§ãã ã•ã„</p>
                        </div>
                    </div>
                    <!-- BTCã®ã¿ -->
                    <button @click="toggleAsset('BTC')"
                        class="w-full flex items-center space-x-3 p-4 rounded-lg smooth-transition"
                        :class="selectedAssets.includes('BTC') ? 'bg-green-500/20 border border-green-500' : 'bg-gray-700 border border-transparent'">
                        <div
                            class="w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-orange-400 to-orange-600">
                            <span class="text-lg font-bold">â‚¿</span>
                        </div>
                        <div class="text-left flex-1">
                            <div class="font-medium">BTC</div>
                            <div class="text-xs text-gray-400">ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³</div>
                        </div>
                        <svg x-show="selectedAssets.includes('BTC')" class="w-6 h-6 text-green-400" fill="currentColor"
                            viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </button>
                    <p class="text-xs text-gray-500 mt-3 text-center">â€» ä»–ã®éŠ˜æŸ„ã¯éšæ™‚è¿½åŠ äºˆå®šã§ã™</p>
                </div>

                <div class="step-line" :class="selectedAssets.length > 0 && apiConnected ? 'completed' : ''"></div>

                <!-- STEP 3: ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ« -->
                <div class="bg-gray-800/50 rounded-xl p-4"
                    :class="selectedAssets.length === 0 || !apiConnected ? 'opacity-50 pointer-events-none' : ''">
                    <div class="flex items-center space-x-3 mb-4">
                        <div
                            class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold bg-gray-600 text-gray-300">
                            3
                        </div>
                        <div>
                            <h3 class="font-medium">ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«ã‚’é¸æŠ</h3>
                            <p class="text-xs text-gray-400">é‹ç”¨ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ã¦é¸æŠ</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-2">
                        <template x-for="level in riskLevels" :key="level.value">
                            <button @click="riskLevel = level.value"
                                class="p-4 rounded-lg text-center smooth-transition"
                                :class="riskLevel === level.value ? 'bg-green-500/20 border-2 border-green-500' : 'bg-gray-700 border-2 border-transparent'">
                                <div class="text-2xl mb-2" x-text="level.icon"></div>
                                <div class="text-sm font-medium" x-text="level.label"></div>
                            </button>
                        </template>
                    </div>
                    <div class="mt-4 p-3 rounded-lg bg-gray-700/50 text-sm text-gray-300">
                        <span x-text="riskLevels.find(l => l.value === riskLevel)?.description"></span>
                    </div>
                </div>

                <!-- é€šçŸ¥è¨­å®š -->
                <div class="bg-gray-800/50 rounded-xl p-4"
                    :class="selectedAssets.length === 0 || !apiConnected ? 'opacity-50 pointer-events-none' : ''">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <span class="text-lg">ğŸ””</span>
                            <div>
                                <div class="text-sm font-medium">å–å¼•é€šçŸ¥</div>
                                <div class="text-xs text-gray-400">å–å¼•æ™‚ã«ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚’å—ã‘å–ã‚‹</div>
                            </div>
                        </div>
                        <button @click="notifications = !notifications" class="toggle-switch"
                            :class="notifications ? 'active' : ''"></button>
                    </div>
                </div>

            </div>

            <!-- ç¢ºèªãƒœã‚¿ãƒ³ -->
            <div class="mt-8 space-y-3">
                <button @click="startAutoTrade()"
                    class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-4 px-6 rounded-xl smooth-transition hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed"
                    :disabled="!apiConnected || selectedAssets.length === 0">
                    è‡ªå‹•å£²è²·ã‚’é–‹å§‹ã™ã‚‹
                </button>
                <p class="text-xs text-gray-500 text-center">
                    è¨­å®šã¯ã„ã¤ã§ã‚‚å¤‰æ›´ã§ãã¾ã™
                </p>
            </div>

        </main>
    </div>

    <!-- Alpine.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <script>
        function setupApp() {
            return {
                // APIé€£æº
                apiConnected: false,
                selectedExchange: '',
                apiKey: '',
                apiSecret: '',

                // è¨­å®š
                selectedAssets: [],
                riskLevel: 'balanced',
                notifications: true,

                assets: {
                    BTC: { name: 'ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³', icon: 'â‚¿', iconBg: 'bg-gradient-to-br from-orange-400 to-orange-600' }
                },

                riskLevels: [
                    { value: 'safe', label: 'å®‰å…¨é‡è¦–', icon: 'ğŸ›¡ï¸', description: 'æå¤±ãƒªã‚¹ã‚¯ã‚’æŠ‘ãˆãŸå®‰å…¨ãªé‹ç”¨ã€‚åˆ©ç›Šã¯æ§ãˆã‚ã§ã™ãŒã€å¤§ããªæå¤±ã‚’é¿ã‘ãŸã„æ–¹ã«ãŠã™ã™ã‚ã€‚' },
                    { value: 'balanced', label: 'ãƒãƒ©ãƒ³ã‚¹', icon: 'âš–ï¸', description: 'ãƒªã‚¹ã‚¯ã¨ãƒªã‚¿ãƒ¼ãƒ³ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã£ãŸé‹ç”¨ã€‚åˆå¿ƒè€…ã«ã‚‚ãŠã™ã™ã‚ã®æ¨™æº–è¨­å®šã§ã™ã€‚' },
                    { value: 'aggressive', label: 'ç©æ¥µé‹ç”¨', icon: 'ğŸš€', description: 'é«˜ã„ãƒªã‚¿ãƒ¼ãƒ³ã‚’ç‹™ã†ç©æ¥µçš„ãªé‹ç”¨ã€‚ãƒªã‚¹ã‚¯ã‚’è¨±å®¹ã§ãã‚‹çµŒé¨“è€…å‘ã‘ã€‚' }
                ],

                selectExchange(exchange) {
                    this.selectedExchange = exchange;
                },

                connectApi() {
                    // ãƒ¢ãƒƒã‚¯: APIæ¥ç¶šæˆåŠŸ
                    this.apiConnected = true;
                },

                disconnectApi() {
                    this.apiConnected = false;
                    this.selectedExchange = '';
                    this.apiKey = '';
                    this.apiSecret = '';
                },

                toggleAsset(key) {
                    if (this.selectedAssets.includes(key)) {
                        this.selectedAssets = this.selectedAssets.filter(a => a !== key);
                    } else {
                        this.selectedAssets.push(key);
                    }
                },

                startAutoTrade() {
                    const riskLabel = this.riskLevels.find(l => l.value === this.riskLevel)?.label;
                    alert('è‡ªå‹•å£²è²·ã‚’é–‹å§‹ã—ã¾ã—ãŸï¼\n\nå–å¼•æ‰€: ' + this.selectedExchange + '\nå¯¾è±¡éŠ˜æŸ„: ' + this.selectedAssets.join(', ') + '\nãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«: ' + riskLabel);
                    window.location.href = 'index.html';
                }
            }
        }
    </script>

<script src="js/plan-switcher.js"></script>
</body>

</html>